{"is_source_file": true, "format": "Python", "description": "Main backend API implementation for a bug detection and management system, built with FastAPI. Contains route definitions, database models, security mechanisms, and configuration setup.", "external_files": ["fastapi", "fastapi.middleware.cors", "fastapi.security", "pydantic", "sqlalchemy", "starlette.responses", "httpx", "dotenv", "hashlib", "hmac"], "external_methods": ["load_dotenv", "os.getenv", "os.path.join", "os.path.exists", "os.path.dirname", "hashlib.pbkdf2_hmac", "hmac.compare_digest", "base64.urlsafe_b64encode", "base64.urlsafe_b64decode", "json.dumps", "json.loads", "datetime.now", "datetime.utcnow", "datetime.fromisoformat", "datetime.timestamp", "timedelta", "timezone", "select", "func.now"], "published": ["app", "settings", "get_session", "load_settings", "hash_password", "verify_password", "create_jwt", "decode_jwt", "get_current_user", "require_permissions", "log_action"], "classes": [{"name": "Settings", "description": "Configuration settings loaded from environment variables and files."}, {"name": "Base", "description": "SQLAlchemy declarative base class."}, {"name": "User", "description": "User model representing registered users, with roles and permissions."}, {"name": "Role", "description": "Role model for grouping permissions, assigned to users."}, {"name": "Permission", "description": "Permission model linked to roles for RBAC."}, {"name": "BugReport", "description": "Entity representing a bug report submitted in the system."}, {"name": "BugReportComment", "description": "Comments made on bug reports."}, {"name": "BugReportAttachment", "description": "Files attached to bug reports."}, {"name": "AnalysisJob", "description": "Represents an analysis job submitted for source code."}, {"name": "AuditLog", "description": "Logging entries for user actions."}, {"name": "SystemConfig", "description": "Configuration key-value pairs stored in the system."}, {"name": "Notification", "description": "User notifications."}, {"name": "NotificationPreference", "description": "User preferences for notifications."}], "methods": [{"name": "load_dotenv", "description": "Loads environment variables from a .env file."}, {"name": "get_session", "description": "Provides an async database session for dependency injection."}, {"name": "hash_password", "description": "Hashes a password using PBKDF2 with a salt."}, {"name": "verify_password", "description": "Verifies a password against the stored hash."}, {"name": "str create_jwt(payload: dict, expires_minutes: int = 60)", "description": "Creates a signed JWT token with a payload.", "scope": "", "scopeKind": ""}, {"name": "dict decode_jwt(token: str)", "description": "Validates and decodes a JWT token.", "scope": "", "scopeKind": ""}, {"name": "User get_current_user( credentials: Optional[HTTPAuthorizationCredentials] = Security(bearer), session: AsyncSession = Depends(get_session), )", "description": "Dependency to fetch current authenticated user.", "scope": "", "scopeKind": ""}, {"name": "require_permissions", "description": "Checks if the current user has required permissions."}, {"name": "log_action", "description": "Logs user actions into AuditLog."}, {"name": "assign_role(user_id: int, role_id: int, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str b64(d: dict)", "scope": "create_jwt", "scopeKind": "function", "description": "unavailable"}, {"name": "create_report(req: BugReportRequest, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "create_role(data: RoleCreate, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "create_user(data: RegisterRequest, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "delete_report(report_id: int, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "delete_user(user_id: int, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ensure_permission(name: str, desc: str = \"\")", "scope": "on_startup", "scopeKind": "function", "description": "unavailable"}, {"name": "export_reports( export_format: str = Query(..., pattern=\"^(pdf|csv|json)$\"), current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "fetch_analysis_results(job_id: str, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "health_check()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["select", "session.execute", "session.get", "session.delete", "session.add", "session.commit", "session.refresh", "httpx.AsyncClient.post", "httpx.AsyncClient.get", "httpx.AsyncClient.post", "io.BytesIO", "io.StringIO"], "search-terms": ["FastAPI", "JWT", "database models", "security", "RBAC", "analysis jobs", "bug reports", "async database", "oauth", "dependency injection"], "state": 2, "file_id": 3, "knowledge_revision": 13, "git_revision": "a5049971269ee8d1153364018ebc026bbe78ed90", "revision_history": [{"9": "ab91a3780a08721aef59b11aac70f1ff5a5632cd"}, {"10": "ab91a3780a08721aef59b11aac70f1ff5a5632cd"}, {"12": "d6853c8d970d5aa2255e7d57a87d931c7d482418"}, {"13": "a5049971269ee8d1153364018ebc026bbe78ed90"}], "ctags": [{"_type": "tag", "name": "AnalysisJob", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class AnalysisJob(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "AuditLog", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class AuditLog(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class Base(DeclarativeBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BugReport", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class BugReport(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BugReportAttachment", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class BugReportAttachment(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BugReportComment", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class BugReportComment(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BugReportRequest", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class BugReportRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BugReportUpdate", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class BugReportUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "JobRequest", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class JobRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LoginRequest", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class LoginRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Notification", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class Notification(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NotificationPreference", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class NotificationPreference(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NotificationRequest", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class NotificationRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Permission", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class Permission(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PermissionCreate", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class PermissionCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RegisterRequest", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class RegisterRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Role", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class Role(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RoleCreate", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class RoleCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RolePermission", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class RolePermission(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Settings", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class Settings(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SystemConfig", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class SystemConfig(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TokenResponse", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class TokenResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class User(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserRole", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class UserRole(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"AnalysisJob\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "AnalysisJob", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"AuditLog\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "AuditLog", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"BugReportAttachment\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "BugReportAttachment", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"BugReportComment\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "BugReportComment", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"BugReport\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "BugReport", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"NotificationPreference\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "NotificationPreference", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"Notification\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Notification", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"Permission\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Permission", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"RolePermission\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "RolePermission", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"Role\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Role", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"SystemConfig\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "SystemConfig", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"UserRole\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "UserRole", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"User\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "access_token", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    access_token: str = Field(..., description=\"JWT access token\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}, {"_type": "tag", "name": "access_token_expires_minutes", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    access_token_expires_minutes: int = 60$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "action", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    action: Mapped[str] = mapped_column(String(128), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "AuditLog", "scopeKind": "class"}, {"_type": "tag", "name": "analysis_engine_url", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    analysis_engine_url: str = \"http:\\/\\/localhost:3001\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "app_name", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    app_name: str = \"Bug Detector Backend API\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "app_version", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    app_version: str = \"1.0.0\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "assign_role", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def assign_role(user_id: int, role_id: int, current: User = Depends(get_current_user), ses/", "language": "Python", "kind": "function", "signature": "(user_id: int, role_id: int, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "assigned_to", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    assigned_to: Mapped[Optional[int]] = mapped_column(ForeignKey(\"User.id\"))$/", "language": "Python", "typeref": "typename:Mapped[Optional[int]]", "kind": "variable", "scope": "BugReport", "scopeKind": "class"}, {"_type": "tag", "name": "assigned_to", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    assigned_to: Optional[int] = None$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "BugReportRequest", "scopeKind": "class"}, {"_type": "tag", "name": "assigned_to", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    assigned_to: Optional[int] = None$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "BugReportUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "b64", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    def b64(d: dict) -> str:$/", "file": true, "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(d: dict)", "scope": "create_jwt", "scopeKind": "function"}, {"_type": "tag", "name": "backend_base_url", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    backend_base_url: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "bearer", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^bearer = HTTPBearer(auto_error=False)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "bug_report_id", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    bug_report_id: Mapped[int] = mapped_column(ForeignKey(\"BugReport.id\", ondelete=\"CASCADE\"), n/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "BugReportAttachment", "scopeKind": "class"}, {"_type": "tag", "name": "bug_report_id", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    bug_report_id: Mapped[int] = mapped_column(ForeignKey(\"BugReport.id\", ondelete=\"CASCADE\"), n/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "BugReportComment", "scopeKind": "class"}, {"_type": "tag", "name": "comment", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    comment: Mapped[str] = mapped_column(Text, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "BugReportComment", "scopeKind": "class"}, {"_type": "tag", "name": "completed_at", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    completed_at: Mapped[Optional[datetime]] = mapped_column(DateTime, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[datetime]]", "kind": "variable", "scope": "AnalysisJob", "scopeKind": "class"}, {"_type": "tag", "name": "cors_origins", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    cors_origins: List[str] = Field(default_factory=lambda: [\"http:\\/\\/localhost:3000\"])$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "create_jwt", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^def create_jwt(payload: dict, expires_minutes: int = 60) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(payload: dict, expires_minutes: int = 60)"}, {"_type": "tag", "name": "create_report", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def create_report(req: BugReportRequest, current: User = Depends(get_current_user), sessio/", "language": "Python", "kind": "function", "signature": "(req: BugReportRequest, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "create_role", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def create_role(data: RoleCreate, current: User = Depends(get_current_user), session: Asyn/", "language": "Python", "kind": "function", "signature": "(data: RoleCreate, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "create_user", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def create_user(data: RegisterRequest, current: User = Depends(get_current_user), session:/", "language": "Python", "kind": "function", "signature": "(data: RegisterRequest, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=func.now(), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "AnalysisJob", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=func.now(), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "BugReport", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=func.now(), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "BugReportComment", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=func.now(), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Notification", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=func.now(), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Role", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=func.now(), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "created_by", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_by: Mapped[int] = mapped_column(ForeignKey(\"User.id\"), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "AnalysisJob", "scopeKind": "class"}, {"_type": "tag", "name": "created_by", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_by: Mapped[int] = mapped_column(ForeignKey(\"User.id\"), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "BugReport", "scopeKind": "class"}, {"_type": "tag", "name": "database_url", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    database_url: str = \"sqlite+aiosqlite:\\/\\/\\/.\\/dev.db\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "decode_jwt", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^def decode_jwt(token: str) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "(token: str)"}, {"_type": "tag", "name": "delete_report", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def delete_report(report_id: int, current: User = Depends(get_current_user), session: Asyn/", "language": "Python", "kind": "function", "signature": "(report_id: int, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "delete_user", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def delete_user(user_id: int, current: User = Depends(get_current_user), session: AsyncSes/", "language": "Python", "kind": "function", "signature": "(user_id: int, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    description: Mapped[Optional[str]] = mapped_column(String(256))$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Permission", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    description: Mapped[Optional[str]] = mapped_column(String(256))$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Role", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    description: Mapped[Optional[str]] = mapped_column(Text)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "BugReport", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    description: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "BugReportRequest", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    description: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "BugReportUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    description: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "PermissionCreate", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    description: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "RoleCreate", "scopeKind": "class"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    details: Mapped[Optional[str]] = mapped_column(Text, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "AuditLog", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    email: EmailStr = Field(..., description=\"User email\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "RegisterRequest", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    email: Mapped[str] = mapped_column(String(128), unique=True, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^engine: AsyncEngine = create_async_engine(settings.database_url, echo=False, pool_pre_ping=True)$/", "language": "Python", "typeref": "typename:AsyncEngine", "kind": "variable"}, {"_type": "tag", "name": "ensure_permission", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^        async def ensure_permission(name: str, desc: str = \"\"):$/", "file": true, "language": "Python", "kind": "function", "signature": "(name: str, desc: str = \"\")", "scope": "on_startup", "scopeKind": "function"}, {"_type": "tag", "name": "expires_in", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    expires_in: int = Field(..., description=\"Seconds until expiry\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}, {"_type": "tag", "name": "export_reports", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def export_reports($/", "language": "Python", "kind": "function", "signature": "( export_format: str = Query(..., pattern=\"^(pdf|csv|json)$\"), current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session), )"}, {"_type": "tag", "name": "exported", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    exported: Mapped[bool] = mapped_column(Boolean, default=False, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[bool]", "kind": "variable", "scope": "BugReport", "scopeKind": "class"}, {"_type": "tag", "name": "fetch_analysis_results", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def fetch_analysis_results(job_id: str, current: User = Depends(get_current_user), session/", "language": "Python", "kind": "function", "signature": "(job_id: str, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "file_path", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    file_path: Mapped[str] = mapped_column(String(256), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "BugReportAttachment", "scopeKind": "class"}, {"_type": "tag", "name": "get_current_user", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def get_current_user($/", "language": "Python", "typeref": "typename:User", "kind": "function", "signature": "( credentials: Optional[HTTPAuthorizationCredentials] = Security(bearer), session: AsyncSession = Depends(get_session), )"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "36061d48adbe0048e4da7ec65d03669d", "format-version": 4, "code-base-name": "BackendAPIandUserManagement", "filename": "BackendAPIandUserManagement/src/api/main.py", "fields": [{"name": "__tablename__ = \"AnalysisJob\"", "scope": "AnalysisJob", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"AuditLog\"", "scope": "AuditLog", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"BugReportAttachment\"", "scope": "BugReportAttachment", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"BugReportComment\"", "scope": "BugReportComment", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"BugReport\"", "scope": "BugReport", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"NotificationPreference\"", "scope": "NotificationPreference", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"Notification\"", "scope": "Notification", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"Permission\"", "scope": "Permission", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"RolePermission\"", "scope": "RolePermission", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"Role\"", "scope": "Role", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"SystemConfig\"", "scope": "SystemConfig", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"UserRole\"", "scope": "UserRole", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"User\"", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "str access_token", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "int access_token_expires_minutes", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] action", "scope": "AuditLog", "scopeKind": "class", "description": "unavailable"}, {"name": "str analysis_engine_url", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str app_name", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "str app_version", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[int]] assigned_to", "scope": "BugReport", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] assigned_to", "scope": "BugReportRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] backend_base_url", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "bearer = HTTPBearer(auto_error=False)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Mapped[int] bug_report_id", "scope": "BugReportAttachment", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] comment", "scope": "BugReportComment", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[datetime]] completed_at", "scope": "AnalysisJob", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] cors_origins", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] created_at", "scope": "AnalysisJob", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] created_by", "scope": "AnalysisJob", "scopeKind": "class", "description": "unavailable"}, {"name": "str database_url", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] description", "scope": "Permission", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "BugReportRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] details", "scope": "AuditLog", "scopeKind": "class", "description": "unavailable"}, {"name": "EmailStr email", "scope": "RegisterRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] email", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "AsyncEngine engine", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int expires_in", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[bool] exported", "scope": "BugReport", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] file_path", "scope": "BugReportAttachment", "scopeKind": "class", "description": "unavailable"}]}