{"is_source_file": true, "format": "Python", "description": "This file implements a comprehensive backend API for a bug detection and management system using FastAPI. It includes user authentication, user and role management, bug report CRUD operations, analysis job submission and status monitoring, notification handling, metrics, and health checks. The code also handles database connections via SQLAlchemy with async support, JWT-based security, permissions, and integrations with external analysis and service endpoints.", "external_files": ["httpx", "fastapi", "pydantic", "sqlalchemy", "starlette.responses", "dotenv"], "external_methods": ["httpx.AsyncClient", "fastapi.Depends", "fastapi.HTTPException", "fastapi.Security", "fastapi.Response", "fastapi.Response", "fastapi.status_code", "fastapi.Depends", "BaseModel", "select", "func", "create_async_engine", "async_sessionmaker", "load_dotenv", "hashlib.pbkdf2_hmac", "hmac.compare_digest", "json.dumps", "json.loads", "base64.urlsafe_b64encode", "base64.urlsafe_b64decode"], "published": ["app", "health_check", "integration_health", "register", "login", "list_users", "create_user", "delete_user", "list_roles", "create_role", "grant_permission", "assign_role", "submit_job", "list_jobs", "get_job", "list_reports", "create_report", "get_report", "update_report", "delete_report", "export_reports", "send_notification", "metrics", "on_startup", "fetch_analysis_results", "list_integration_endpoints"], "classes": [{"name": "Settings", "description": "Configuration class holding settings loaded from environment variables and configuration files."}, {"name": "Base", "description": "SQLAlchemy declarative base for ORM models."}, {"name": "UserRole", "description": "Association table linking users to roles."}, {"name": "RolePermission", "description": "Association table linking roles to permissions."}, {"name": "User", "description": "Represents application users with roles and credentials."}, {"name": "Role", "description": "Represents roles assigned to users, with permissions."}, {"name": "Permission", "description": "Permissions associated with roles for access control."}, {"name": "BugReport", "description": "Represents a bug report with details, severity, status, and assignments."}, {"name": "BugReportComment", "description": "Comments on bug reports."}, {"name": "BugReportAttachment", "description": "File attachments related to bug reports."}, {"name": "AnalysisJob", "description": "Represents an analysis job submitted for source code analysis."}, {"name": "AuditLog", "description": "Logs user actions for auditing purposes."}, {"name": "SystemConfig", "description": "Stores configuration key-value pairs, e.g., for external engine IDs."}, {"name": "Notification", "description": "Represents a user notification."}, {"name": "NotificationPreference", "description": "Stores user notification preferences."}], "methods": [{"name": "get_session", "description": "Async generator that yields a SQLAlchemy AsyncSession."}, {"name": "hash_password", "description": "Hashes a password using pbkdf2_hmac with a random salt."}, {"name": "verify_password", "description": "Verifies a password against a stored hash."}, {"name": "str create_jwt(payload: dict, expires_minutes: int = 60)", "description": "Creates a JWT token with payload and expiration.", "scope": "", "scopeKind": ""}, {"name": "dict decode_jwt(token: str)", "description": "Decodes and verifies a JWT token.", "scope": "", "scopeKind": ""}, {"name": "get_current_user", "description": "Retrieves the current user based on JWT token."}, {"name": "require_permissions", "description": "Checks if user has required permissions."}, {"name": "log_action", "description": "Logs user actions to the AuditLog."}, {"name": "load_settings", "description": "Loads configuration settings from environment and files."}, {"name": "health_check", "description": "Basic health endpoint."}, {"name": "integration_health", "description": "Checks database and external services health."}, {"name": "register", "description": "User registration endpoint."}, {"name": "login", "description": "User login endpoint, returns JWT."}, {"name": "list_users", "description": "Lists all users."}, {"name": "create_user(data: RegisterRequest, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))", "description": "Creates a new user.", "scope": "", "scopeKind": ""}, {"name": "delete_user(user_id: int, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))", "description": "Deletes a user.", "scope": "", "scopeKind": ""}, {"name": "list_roles", "description": "Lists all roles."}, {"name": "create_role(data: RoleCreate, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))", "description": "Creates a new role.", "scope": "", "scopeKind": ""}, {"name": "grant_permission", "description": "Assigns permission to a role."}, {"name": "assign_role(user_id: int, role_id: int, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))", "description": "Assigns a role to a user.", "scope": "", "scopeKind": ""}, {"name": "submit_job", "description": "Submits an analysis job."}, {"name": "list_jobs", "description": "Lists all analysis jobs."}, {"name": "get_job", "description": "Gets details of a specific analysis job, including engine results."}, {"name": "list_reports", "description": "Lists bug reports with optional filters."}, {"name": "create_report(req: BugReportRequest, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))", "description": "Creates a new bug report.", "scope": "", "scopeKind": ""}, {"name": "get_report", "description": "Fetches details of a bug report."}, {"name": "update_report", "description": "Updates an existing bug report."}, {"name": "delete_report(report_id: int, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))", "description": "Deletes a bug report.", "scope": "", "scopeKind": ""}, {"name": "export_reports( export_format: str = Query(..., pattern=\"^(pdf|csv|json)$\"), current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session), )", "description": "Exports bug reports in various formats.", "scope": "", "scopeKind": ""}, {"name": "send_notification", "description": "Creates and queues a notification, and triggers external integration."}, {"name": "metrics", "description": "Returns system metrics."}, {"name": "on_startup", "description": "Initializes database and default roles/permissions at startup."}, {"name": "fetch_analysis_results(job_id: str, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))", "description": "Stub to fetch analysis results from external engine.", "scope": "", "scopeKind": ""}, {"name": "list_integration_endpoints", "description": "Stub to fetch integration endpoints from external service."}, {"name": "Tuple[bool,Optional[int],Optional[str]] _ping_service(url: str, path: str = \"/\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str b64(d: dict)", "scope": "create_jwt", "scopeKind": "function", "description": "unavailable"}, {"name": "ensure_permission(name: str, desc: str = \"\")", "scope": "on_startup", "scopeKind": "function", "description": "unavailable"}], "calls": ["select", "session.execute", "session.get", "session.add", "session.delete", "session.commit", "session.refresh", "httpx.AsyncClient", "hashlib.pbkdf2_hmac", "hmac.new", "json.dumps", "json.loads", "base64.urlsafe_b64encode", "base64.urlsafe_b64decode"], "search-terms": ["FastAPI", "JWT", "async SQLAlchemy", "BugReport", "AnalysisJob", "User", "Role", "Permission", "auth", "reports", "jobs", "health", "external service", "analysis engine"], "state": 2, "file_id": 3, "knowledge_revision": 15, "git_revision": "f34888e577a9160be29031803f93c195d509580e", "revision_history": [{"9": "ab91a3780a08721aef59b11aac70f1ff5a5632cd"}, {"10": "ab91a3780a08721aef59b11aac70f1ff5a5632cd"}, {"12": "d6853c8d970d5aa2255e7d57a87d931c7d482418"}, {"13": "a5049971269ee8d1153364018ebc026bbe78ed90"}, {"15": "f34888e577a9160be29031803f93c195d509580e"}], "ctags": [{"_type": "tag", "name": "AnalysisJob", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class AnalysisJob(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "AuditLog", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class AuditLog(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class Base(DeclarativeBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BugReport", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class BugReport(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BugReportAttachment", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class BugReportAttachment(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BugReportComment", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class BugReportComment(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BugReportRequest", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class BugReportRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BugReportUpdate", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class BugReportUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "JobRequest", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class JobRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LoginRequest", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class LoginRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Notification", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class Notification(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NotificationPreference", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class NotificationPreference(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NotificationRequest", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class NotificationRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Permission", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class Permission(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PermissionCreate", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class PermissionCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RegisterRequest", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class RegisterRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Role", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class Role(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RoleCreate", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class RoleCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RolePermission", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class RolePermission(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Settings", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class Settings(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SystemConfig", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class SystemConfig(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TokenResponse", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class TokenResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class User(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserRole", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^class UserRole(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"AnalysisJob\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "AnalysisJob", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"AuditLog\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "AuditLog", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"BugReportAttachment\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "BugReportAttachment", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"BugReportComment\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "BugReportComment", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"BugReport\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "BugReport", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"NotificationPreference\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "NotificationPreference", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"Notification\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Notification", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"Permission\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Permission", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"RolePermission\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "RolePermission", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"Role\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Role", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"SystemConfig\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "SystemConfig", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"UserRole\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "UserRole", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    __tablename__ = \"User\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "_ping_service", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def _ping_service(url: str, path: str = \"\\/\") -> Tuple[bool, Optional[int], Optional[str]]/", "language": "Python", "typeref": "typename:Tuple[bool,Optional[int],Optional[str]]", "kind": "function", "signature": "(url: str, path: str = \"/\")"}, {"_type": "tag", "name": "access_token", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    access_token: str = Field(..., description=\"JWT access token\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}, {"_type": "tag", "name": "access_token_expires_minutes", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    access_token_expires_minutes: int = 60$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "action", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    action: Mapped[str] = mapped_column(String(128), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "AuditLog", "scopeKind": "class"}, {"_type": "tag", "name": "analysis_engine_url", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    analysis_engine_url: str = \"http:\\/\\/localhost:3001\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "app_name", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    app_name: str = \"Bug Detector Backend API\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "app_version", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    app_version: str = \"1.0.0\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "assign_role", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def assign_role(user_id: int, role_id: int, current: User = Depends(get_current_user), ses/", "language": "Python", "kind": "function", "signature": "(user_id: int, role_id: int, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "assigned_to", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    assigned_to: Mapped[Optional[int]] = mapped_column(ForeignKey(\"User.id\"))$/", "language": "Python", "typeref": "typename:Mapped[Optional[int]]", "kind": "variable", "scope": "BugReport", "scopeKind": "class"}, {"_type": "tag", "name": "assigned_to", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    assigned_to: Optional[int] = None$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "BugReportRequest", "scopeKind": "class"}, {"_type": "tag", "name": "assigned_to", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    assigned_to: Optional[int] = None$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "BugReportUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "b64", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    def b64(d: dict) -> str:$/", "file": true, "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(d: dict)", "scope": "create_jwt", "scopeKind": "function"}, {"_type": "tag", "name": "backend_base_url", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    backend_base_url: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "bearer", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^bearer = HTTPBearer(auto_error=False)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "bug_report_id", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    bug_report_id: Mapped[int] = mapped_column(ForeignKey(\"BugReport.id\", ondelete=\"CASCADE\"), n/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "BugReportAttachment", "scopeKind": "class"}, {"_type": "tag", "name": "bug_report_id", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    bug_report_id: Mapped[int] = mapped_column(ForeignKey(\"BugReport.id\", ondelete=\"CASCADE\"), n/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "BugReportComment", "scopeKind": "class"}, {"_type": "tag", "name": "comment", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    comment: Mapped[str] = mapped_column(Text, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "BugReportComment", "scopeKind": "class"}, {"_type": "tag", "name": "completed_at", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    completed_at: Mapped[Optional[datetime]] = mapped_column(DateTime, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[datetime]]", "kind": "variable", "scope": "AnalysisJob", "scopeKind": "class"}, {"_type": "tag", "name": "cors_origins", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    cors_origins: List[str] = Field(default_factory=lambda: [\"http:\\/\\/localhost:3000\"])$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "create_jwt", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^def create_jwt(payload: dict, expires_minutes: int = 60) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(payload: dict, expires_minutes: int = 60)"}, {"_type": "tag", "name": "create_report", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def create_report(req: BugReportRequest, current: User = Depends(get_current_user), sessio/", "language": "Python", "kind": "function", "signature": "(req: BugReportRequest, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "create_role", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def create_role(data: RoleCreate, current: User = Depends(get_current_user), session: Asyn/", "language": "Python", "kind": "function", "signature": "(data: RoleCreate, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "create_user", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def create_user(data: RegisterRequest, current: User = Depends(get_current_user), session:/", "language": "Python", "kind": "function", "signature": "(data: RegisterRequest, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=func.now(), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "AnalysisJob", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=func.now(), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "BugReport", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=func.now(), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "BugReportComment", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=func.now(), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Notification", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=func.now(), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Role", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=func.now(), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "created_by", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_by: Mapped[int] = mapped_column(ForeignKey(\"User.id\"), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "AnalysisJob", "scopeKind": "class"}, {"_type": "tag", "name": "created_by", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    created_by: Mapped[int] = mapped_column(ForeignKey(\"User.id\"), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "BugReport", "scopeKind": "class"}, {"_type": "tag", "name": "database_url", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    database_url: str = \"sqlite+aiosqlite:\\/\\/\\/.\\/dev.db\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "decode_jwt", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^def decode_jwt(token: str) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "(token: str)"}, {"_type": "tag", "name": "delete_report", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def delete_report(report_id: int, current: User = Depends(get_current_user), session: Asyn/", "language": "Python", "kind": "function", "signature": "(report_id: int, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "delete_user", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def delete_user(user_id: int, current: User = Depends(get_current_user), session: AsyncSes/", "language": "Python", "kind": "function", "signature": "(user_id: int, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    description: Mapped[Optional[str]] = mapped_column(String(256))$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Permission", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    description: Mapped[Optional[str]] = mapped_column(String(256))$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Role", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    description: Mapped[Optional[str]] = mapped_column(Text)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "BugReport", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    description: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "BugReportRequest", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    description: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "BugReportUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    description: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "PermissionCreate", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    description: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "RoleCreate", "scopeKind": "class"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    details: Mapped[Optional[str]] = mapped_column(Text, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "AuditLog", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    email: EmailStr = Field(..., description=\"User email\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "RegisterRequest", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    email: Mapped[str] = mapped_column(String(128), unique=True, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^engine: AsyncEngine = create_async_engine(settings.database_url, echo=False, pool_pre_ping=True)$/", "language": "Python", "typeref": "typename:AsyncEngine", "kind": "variable"}, {"_type": "tag", "name": "ensure_permission", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^        async def ensure_permission(name: str, desc: str = \"\"):$/", "file": true, "language": "Python", "kind": "function", "signature": "(name: str, desc: str = \"\")", "scope": "on_startup", "scopeKind": "function"}, {"_type": "tag", "name": "expires_in", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    expires_in: int = Field(..., description=\"Seconds until expiry\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}, {"_type": "tag", "name": "export_reports", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def export_reports($/", "language": "Python", "kind": "function", "signature": "( export_format: str = Query(..., pattern=\"^(pdf|csv|json)$\"), current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session), )"}, {"_type": "tag", "name": "exported", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    exported: Mapped[bool] = mapped_column(Boolean, default=False, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[bool]", "kind": "variable", "scope": "BugReport", "scopeKind": "class"}, {"_type": "tag", "name": "fetch_analysis_results", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^async def fetch_analysis_results(job_id: str, current: User = Depends(get_current_user), session/", "language": "Python", "kind": "function", "signature": "(job_id: str, current: User = Depends(get_current_user), session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "file_path", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^    file_path: Mapped[str] = mapped_column(String(256), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "BugReportAttachment", "scopeKind": "class"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/bug-detector-50993-51124/BackendAPIandUserManagement/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}], "hash": "c8fe5534f4517293f738e6d83ecad0d1", "format-version": 4, "code-base-name": "BackendAPIandUserManagement", "filename": "BackendAPIandUserManagement/src/api/main.py", "fields": [{"name": "__tablename__ = \"AnalysisJob\"", "scope": "AnalysisJob", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"AuditLog\"", "scope": "AuditLog", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"BugReportAttachment\"", "scope": "BugReportAttachment", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"BugReportComment\"", "scope": "BugReportComment", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"BugReport\"", "scope": "BugReport", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"NotificationPreference\"", "scope": "NotificationPreference", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"Notification\"", "scope": "Notification", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"Permission\"", "scope": "Permission", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"RolePermission\"", "scope": "RolePermission", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"Role\"", "scope": "Role", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"SystemConfig\"", "scope": "SystemConfig", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"UserRole\"", "scope": "UserRole", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"User\"", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "str access_token", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "int access_token_expires_minutes", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] action", "scope": "AuditLog", "scopeKind": "class", "description": "unavailable"}, {"name": "str analysis_engine_url", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str app_name", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "str app_version", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[int]] assigned_to", "scope": "BugReport", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] assigned_to", "scope": "BugReportRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] backend_base_url", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "bearer = HTTPBearer(auto_error=False)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Mapped[int] bug_report_id", "scope": "BugReportAttachment", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] comment", "scope": "BugReportComment", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[datetime]] completed_at", "scope": "AnalysisJob", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] cors_origins", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] created_at", "scope": "AnalysisJob", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] created_by", "scope": "AnalysisJob", "scopeKind": "class", "description": "unavailable"}, {"name": "str database_url", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] description", "scope": "Permission", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "BugReportRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] details", "scope": "AuditLog", "scopeKind": "class", "description": "unavailable"}, {"name": "EmailStr email", "scope": "RegisterRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] email", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "AsyncEngine engine", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int expires_in", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[bool] exported", "scope": "BugReport", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] file_path", "scope": "BugReportAttachment", "scopeKind": "class", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}]}